rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    // Match any document in the "users" collection
    match /users/{userId} {
      // Allow read/write if the user is authenticated and accessing their own document
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }

    // Optionally, you can allow read-only access to public data:
    match /public/{document=**} {
      allow read: if true;  // Anyone can read
      allow write: if false;  // No one can write
    }

    // Default rule to deny write access for all other documents
    match /{document=**} {
      allow read: if request.auth != null;  // Only authenticated users can read
      allow write: if false;  // Deny write access
    }
  }
}